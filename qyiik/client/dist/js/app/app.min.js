var applicationModule=angular.module("qyiikApp",["ui.bootstrap","qk.templates","ui.router","abstract.factory","qk.config","qk.login","qk.signUpCtrl"]);applicationModule.config(["$stateProvider","CONFIG",function(t,e){t.state("signin",{url:"/signin",controller:"LoginController",templateUrl:"app/partials/login.html"}).state("signup",{url:"/signup",controller:"SignUpController",templateUrl:"app/partials/signup.html"}).state("security",{url:"/security",templateUrl:"app/partials/security.html"}).state("technical",{url:"/technical",templateUrl:"app/partials/technical.html"}).state("changepwd",{url:"/changepwd",templateUrl:"app/partials/changepwd.html"})}]),applicationModule.controller("ApplicationController",["$scope","$state",function(t,e){t.goTo=function(t){console.log(t),e.transitionTo(t)}}]);var loginModule=angular.module("qk.login",["qk.auth","qk.profile","qk.message"]);loginModule.controller("LoginController",["$state","$scope","$rootScope","AuthService","$stateParams","ProfileModel","MessageModel",function(t,e,r,o,s,n,a){e.profile=new n,e.login=function(t){e.profile.message.form.processing=!0,e.profile.form.message="",t.$valid&&o.login(e.profile.getMethod(),e.profile.getCredentials()).then(function(t){e.profile.form.submitted=!0,0==t.sqlCode?e.profile.form.message="Success":e.profile.form.message=t.sqlErrm},function(t){e.profile.form.submitted=!0,0==t.sqlCode?e.profile.form.message="Success":e.profile.form.message=t.sqlErrm})},e.reset=function(){},e.cancelChangePassword=function(){},e.changePassword=function(t){}}]);var signUpDataCtrl=angular.module("qk.signUpCtrl",["qk.signUpService","qk.signUp","qk.message","qk.user.form"]);signUpDataCtrl.controller("SignUpController",["$state","$scope","$rootScope","SignUpService","$stateParams","SignUpModel","MessageModel","UserFormModel",function(t,e,r,o,s,n,a,i){e.userForm=new i,e.createAccount=function(t){e.userForm.form.submitted=!0,e.userForm.form.message="",t.$valid&&o.createAccount(e.userForm.user).then(function(t){"0"==t.data.sqlCode?(console.log(t),e.userForm.form.message="Success"):e.userForm.form.message=t.data.sqlErrm})}}]);var qyiikConfig=angular.module("qk.config",[]);window.console=window.console||{},window.console.log=window.console.log||function(){},qyiikConfig.constant("CONFIG",function(){var t="http://db1.qyiik.com/qyiikrecruit/",e="getStaticContent",r="/assets/js/directive/template/",o="/assets/js/partials/",s="/assets/images/";return{CONTEXT:t,STATIC_CONTENT:t+"/"+e,TEMPLATECONTEXT:t+r,PARTIALS:t+o,IMAGE:t+s}}());var user=angular.module("qk.user",["qk.message"]);user.factory("UserModel",["$http","MessageModel","CONFIG","AbstractFactory",function(t,e,r,o){var s=(new o,function(){this.firstName,this.lastName,this.password,this.confirmPassword,this.emailAddress,this.companyName,this.message=new e,this.controller="agt_rgn.create_agt"});return s.prototype={getMethod:function(){return this.controller},getParam:function(){return{p_first_name:this.firstName,p_last_name:this.lastName,p_email_address:this.emailAddress,p_password:this.password,p_agc_id:this.companyName}}},s}]);var company=angular.module("qk.company",["qk.message"]);company.factory("CompanyModel",["$http","MessageModel","CONFIG","AbstractFactory",function(t,e,r,o){var s=new o,n=function(){var e=this;this.data;var r=t(s.getUrl("agc.list"));r.then(function(t){e.data=t.data.jsonData})};return n.prototype={getAllCompany:function(){return this}},n}]);var message=angular.module("qk.message",["abstract.factory"]);message.factory("MessageModel",["$http","CONFIG","AbstractFactory",function(t,e,r){var o=(new r,function(){this.form={},this.form.submitted=!1,this.form.processing=!1,this.success,this.failure});return o.prototype={isSubmitted:function(){return this.form.submitted},isProcessing:function(){return this.form.processing},getMessage:function(){return null!=this.success?success:failure}},o}]);var profile=angular.module("qk.profile",["qk.message"]);profile.factory("ProfileModel",["$http","MessageModel","CONFIG","AbstractFactory",function(t,e,r,o){var s=(new o,function(){this.qyiikid,this.password,this.rememberme="Y",this.message=new e,this.controller="agt_sty.log_in",this.form={},this.form.submitted=!1,this.form.message});return s.prototype={getCredentials:function(){return{p_email_address:this.qyiikid,p_password:this.password,p_remember_me:this.rememberme}},getMethod:function(){return this.controller},isSubmitted:function(){return this.form.submitted}},s}]);var signUp=angular.module("qk.signUp",["qk.message"]);signUp.factory("SignUpModel",["$http","MessageModel","CONFIG","AbstractFactory",function(t,e,r,o){var s=(new o,function(){this.companyCombo,this.firstname,this.lastname,this.password,this.email,this.message=new e,this.companyController="agc.list",this.signUpController="agt_rgn.create_agt"});return s.prototype={getCompanyMethod:function(){return this.companyController},getSignUpMethod:function(){return this.signUpController},getSignUpFormData:function(){return{p_email_address:this.email,p_password:this.password,p_last_name:this.lastname,p_agc_id:this.companyCombo,p_first_name:this.firstname}}},s}]);var userForm=angular.module("qk.user.form",["qk.message","qk.user","qk.company"]);userForm.factory("UserFormModel",["$http","MessageModel","CONFIG","AbstractFactory","UserModel","CompanyModel",function(t,e,r,o,s,n){var a=(new o,function(){this.user=new s,this.pattern=/^(?=.*\d)(?=.*[a-zA-Z]).{8,12}$/,this.allCompany=new n,this.form={},this.form.submitted=!1,this.form.message});return a.prototype={},a}]);var user=angular.module("qk.user",["qk.message"]);user.factory("UserModel",["$http","MessageModel","CONFIG","AbstractFactory",function(t,e,r,o){var s=(new o,function(){this.firstName,this.lastName,this.password,this.confirmPassword,this.emailAddress,this.companyName,this.termsAndCondition,this.message=new e,this.controller="agt_rgn.create_agt"});return s.prototype={getMethod:function(){return this.controller},getParam:function(){return{p_first_name:this.firstName,p_last_name:this.lastName,p_email_address:this.emailAddress,p_password:this.password,p_agc_id:this.companyName}}},s}]);var abstractFactory=angular.module("abstract.factory",["qk.config"]);abstractFactory.factory("AbstractFactory",["$http","CONFIG",function(t,e){var r=function(){this.data={}};return r.prototype={getUrl:function(t){var r=e.CONTEXT+t;return console.log(r),{url:r,method:"GET"}},postUrl:function(t,e){return console.log(e),{url:t,method:"POST",data:e,headers:{"Content-Type":"application/json"}}},getRequest:function(t,r){console.log(r);var o=e.CONTEXT+t,s={url:o,dataType:"jsonp",method:"GET"};return null!=r&&(s.params=r),s},processResponse:function(t){return"SUCCESS"==t.responseCode||"success"==t.responseCode?t.responseDescription:""!=t.errorDescription?t.errorDescription:t.errorCode}},r}]);var authentication=angular.module("qk.auth",[]);authentication.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized",invalidDatesCode:"M_ERROR_CODE_1019"}),authentication.factory("AuthService",["$http","$q","Session","AbstractFactory",function(t,e,r,o){var s={},n=new o;return s.login=function(o,s){return t(n.getRequest(o,s)).then(function(t){return console.log("response : "+t.data.inviteeId),t.data.inviteeId>0||null!=t.data.allCompany&&t.data.allCompany.length>1?(r.create(t.data.sessionid,t.data.inviteeId,t.data.inviteeType),t.data):e.reject(t.data)})},s.reset=function(e){return param={eventId:e.eventId,emailAddress:e.emailAddress,method:"resetPassword",controller:"registration",methodType:"GET"},t(n.getUrl(resourceURL,param)).then(function(t){return t.data})},s.handleResponse=function(t){"M_ERROR_CODE_1019"==t.errorCode?(param={eventid:t.eventId,showComments:!0,confirmationComments:"",comments:t.message},$state.go("overview",param)):"M_ERROR_CODE_3009"==t.errorCode?$state.go("notfound"):$state.go("O"==t.eventRegistrationType?"openregistration":"overview.login",param)},s.doChangePassword=function(e){var r=JSON.stringify(e);return param={data:r,method:"changePassword",controller:"registration",methodType:"POST"},t(n.postUrl(resourceURL,param)).then(function(t){return t.data})},s.isAuthenticated=function(t){return t.inviteeId>0&&-1!=t.sessionid},s.isAuthorized=function(t){return s.isAuthenticated(t)},s.getLoginParam=function(t){return null!=t?(param={eventid:t.eventId,inviteeid:t.inviteeId,inviteeType:t.inviteeType},param):null},s}]),authentication.service("Session",function(){this.create=function(t,e,r){this.id=t,this.userId=e,this.userRole=r},this.destroy=function(){this.id=null,this.userId=null,this.userRole=null}});var signUpService=angular.module("qk.signUpService",[]);signUpService.factory("SignUpService",["$http","$q","Session","AbstractFactory",function(t,e,r,o){var s={},n=new o;return s.loadCompany=function(e,r){return t(n.getRequest(e,r)).then(function(t){return t})},s.createAccount=function(e){return t(n.getRequest(e.getMethod(),e.getParam())).then(function(t){return t})},s}]);